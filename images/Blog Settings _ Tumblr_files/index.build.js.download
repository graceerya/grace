webpackJsonp([24],{0:function(t,e,i){i(1626),t.exports=i(1642)},1556:function(t,e,i){"use strict";var n=i(248),s=function(t){!function(e){try{t(i(236))}catch(t){n(t,"post-form-builder")}}(i)};t.exports=s},1626:function(t,e,i){"use strict";var n=i(1627);i(1640),n.start()},1627:function(t,e,i){"use strict";var n=i(129),s=i(136),o=i(1628),a=i(5),r=i(1634),c=i(1636),l=i(1556),d=i(1638),u=a.extend({root:"/settings/",routes:{account:"account",labs:"labs",privacy:"privacy"},initialize:function(){var t=this;n.has("Components/PostFormBuilder")&&this.listenTo(s,"peepr:open",function(e){t.postFormBuilder||l(function(e){t.postFormBuilder=new e})})},account:function(){this.activeSessions=new r,this.tagfiltering=new o},labs:function(){this.labs=new c},privacy:function(){this.privacy=new d({el:"#settings_form"}).render()}});t.exports=u},1628:function(t,e,i){"use strict";var n=i(214),s=i(1629),o=n.extend({name:"SettingsMenu",view:s});t.exports=o},1629:function(t,e,i){"use strict";var n=i(1630),s=i(129),o=i(1632),a=i(1633),r=i(8),c=i(3),l=i(136),d=n.extend({el:"#filtering_tags",templates:{layout:a},events:{"click .accordion_trigger":"_onEditClick","click .addTag-button":"_onAddClick","keydown input":"_onInputKeydown"},initialize:function(t){var e=s.get("Components/Settings");this.model=new o({filteredTag:e.filtered_tags}),this._cacheSelectors(),n.prototype.initialize.call(this,this.options)},_onInputKeydown:function(t){if(13===t.which)return t.preventDefault(),this._onAddTag(),!1},_logEvent:function(t,e){t&&l.trigger(t,{loggingData:e||{}})},_onRemoveTagClick:function(t){t.preventDefault();var e=r(t.currentTarget),i=e.parent(".blog").data("tag");i&&(e.addClass("loading"),this._removetag(i))},_removetag:function(t){var e=this;if(!t)return!1;var i=this.model.removeTag(t);i.done(function(){e._onRemovetagSuccess(t)}),i.fail(function(){e._logEvent("userTagFiltering:FilteredRemoveTagError",{from:"settings"})})},_onRemovetagSuccess:function(t){this.$blogsList.find('[data-tag="'+t+'"]').remove(),this._logEvent("userTagFiltering:FilteredTagRemoved",{from:"settings"})},_onAddClick:function(t){t.preventDefault(),this._onAddTag()},_onAddTag:function(t){var e=this.$blockInput.val().trim().toLowerCase();e&&this._addtag(e)},_addtag:function(t){var e=this;if(t){this.$blockButton.addClass("loading"),this.$blockInput.attr("disabled",!0);var i=this.model.addTag(t);i.done(function(){e._onAddtagSuccess(t)}),i.fail(function(){e._logEvent("userTagFiltering:FilteredAddTagError",{from:"settings"})})}},_onAddtagSuccess:function(t){this.$blockButton.removeClass("loading"),this.$blockInput.attr("disabled",!1).val(""),this.$blockInput.removeClass("error");var e=this.$blogsList.find('[data-tag="'+t+'"]');if(t){if(e.length>0)return;this.$blogsList.prepend(this.templates.layout({filteredtags:[t]})),this._logEvent("userTagFiltering:FilteredTagAdded",{from:"settings"})}},_cacheSelectors:function(){this.$blogsList=this.$(".blogs"),this.$blockInput=this.$("input"),this.$blockButton=this.$(".block-button"),this.$triggerWrapper=this.$(".accordion_trigger_wrapper")},_fetchBlogs:function(){this.is_open||this._show(),this.$blogsList.append(this.templates.layout({filteredtags:this.model.get("filteredTag")})),this.$blogsList.on("click",".stop-tagfiltering",c.bind(this._onRemoveTagClick,this))},_show:function(){!this.is_open&&this.$content.length&&(this.$trigger.removeClass("loading").addClass("hide"),this.$triggerWrapper.hide(),this.$content.addClass("show"),this.is_open=!0,this.enable_inputs(),this.$("#ignore").focus())},_onEditClick:function(t){t.preventDefault(),this._fetchBlogs()}});t.exports=d},1630:function(t,e,i){"use strict";var n=i(8),s=i(136),o=i(1631),a=o.extend({events:{'change .accordion_trigger[type="checkbox"]':"on_trigger_change",'click .accordion_trigger[type!="checkbox"]':"on_trigger_click"},initialize:function(t){o.prototype.initialize.call(this,t);var e=this.$el.find('.accordion_trigger[type="checkbox"]');e.length&&e.get(0).checked&&this.show(!0)},hide:function(){this.$el.attr("data-reset")&&(this.$inputs.val(""),this.$inputs.filter(":checked").attr("checked",!1)),s.trigger("SettingsAccordionToggle:hide",this.$el),o.prototype.hide.call(this)},on_trigger_change:function(t){t.currentTarget.checked?this.show():this.hide()},on_trigger_click:function(t){t.preventDefault();var e=n(t.currentTarget);if(e.data("accordion-toggle")){var i=e.data("accordion-toggle");e.data("accordion-toggle",e.text()),e.text(i)}this.is_open?this.hide():this.show()}});t.exports=a},1631:function(t,e,i){"use strict";var n=i(3),s=i(8),o=i(226),a=i(136),r=o.extend({initialize:function(t){this.options=n.extend({},this.defaults,t),this.options.delay_init||this.init_accordion()},init_accordion:function(){this.is_open=!1,this.cache_selectors(),this.disable_inputs()},cache_selectors:function(){this.$trigger=this.$(".accordion_trigger"),this.$content=this.$(".accordion_content"),this.$inputs=this.$(".accordion_content :input:not(.placeholder)"),this.$doc=s(document)},show:function(t){if(this.$content.length){if(this.$content.addClass("show"),this.$el.addClass("open"),t&&this.$content.addClass("no_animate"),this.enable_inputs(),this.is_open=!0,!t){var e=this.$(".accordion_content :input:not(.placeholder)");e.filter("[autofocus]").length?e.filter("[autofocus]").first().focus():e.first().focus()}a.trigger("SettingsAccordion:show",this.$content)}},hide:function(){this.$content.length&&(this.$content.removeClass("show no_animate"),this.$el.removeClass("open"),this.is_open=!1,this.disable_inputs(),a.trigger("SettingsAccordion:hide",this.$content))},disable_inputs:function(){this.$inputs&&this.$inputs.attr("disabled",!0).blur()},enable_inputs:function(){this.$inputs&&this.$inputs.attr("disabled",!1)}});t.exports=r},1632:function(t,e,i){"use strict";var n=i(185),s=i(8),o=n.extend({removeTag:function(t){var e=s.ajax({url:"/svc/user/filtered_tags/"+encodeURIComponent(t),type:"DELETE",withFormKey:!0});return e},addTag:function(t){var e=s.ajax({url:"/svc/user/filtered_tags",type:"POST",data:{filtered_tags:[t]},withFormKey:!0});return e}});t.exports=o},1633:function(module,exports,__webpack_require__){var _=__webpack_require__(3),_imports="undefined"!=typeof _?_.templateSettings.imports:{},_keys=_.keys,_values=_.values;module.exports=Function(_keys(_imports),"return "+function(obj){function print(){__p+=__j.call(arguments,"")}obj||(obj={});var __t,__p="",__e=_.escape,__j=Array.prototype.join;with(obj)_.each(filteredtags,function(t){__p+=' <li class="blog" data-tag="'+__e(t)+'"><div class="blog-info"><label>#'+__e(t)+'</label></div><button class="chrome big stop-tagfiltering" type="button"><span class="label">Remove</span> <span class="Knight-Rider-loader animate"><span class="Knight-Rider-bar"></span> <span class="Knight-Rider-bar"></span> <span class="Knight-Rider-bar"></span></span></button><div class="clear"></div></li> '});return __p}.toString()).apply(void 0,_values(_imports))},1634:function(t,e,i){"use strict";var n=i(214),s=i(1635),o=n.extend({name:"ActiveSessions",initialize:function(){this.view=new s}});t.exports=o},1635:function(t,e,i){"use strict";var n=i(8),s=i(3),o=i(130),a=i(226),r=i(213),c=i(235),l=a.extend({el:".past-sessions",events:{"click [data-js-revoke-session]":"onRevokeSessionClick"},defaults:function(){return{secure_form_key:n('input[name="secure_form_key"]').val()}},showDialog:function(t,e){var i=o("%1$sLog out on %2$s?%3$sIf you still want to use that browser to access your Tumblr account, you'll need to log back in.%4$s","<h3>",t,"</h3><small>","</small>");r.confirm(i,s.bind(function(){this.killSession(e)},this),s.noop,o("Log out"),o("Nevermind"))},hideSession:function(t){var e=this.$('[data-id="'+t+'"]').closest(".session");c.animate(e,{height:[0,"auto"],opacity:[0,1]},{duration:300,easing:"easeInOutQuad",complete:s.bind(function(){e.remove()},this)})},killSession:function(t){var e={record_id:t};n.ajax({type:"POST",url:"/svc/settings/logout_web_session",data:e,withFormKey:!0,dataType:"json",success:s.bind(function(){this.hideSession(t)},this)})},onRevokeSessionClick:function(t){t.preventDefault();var e=n(t.currentTarget),i=e.data("browser"),s=e.data("id");this.showDialog(i,s)}});t.exports=l},1636:function(t,e,i){"use strict";var n=i(214),s=i(1637),o=n.extend({name:"Labs",initialize:function(){this.view=new s}});t.exports=o},1637:function(t,e,i){"use strict";var n=i(226),s=n.extend({el:".tumblr_settings--labs .labs-settings-form",events:{"click .labs-master-toggle .binary_switch":"masterToggle"},initialize:function(){this.$masterSwitchCheckbox=this.$('.labs-master-toggle input[type="checkbox"]'),this.$experimentTogglesWrapper=this.$(".experiment-toggles"),this.$experimentSwitches=this.$experimentTogglesWrapper.find('.binary_switch input[type="checkbox"]'),this.masterToggle()},masterToggle:function(){this.$masterSwitchCheckbox.prop("checked")?this.enableExperimentSettings():this.disableExperimentSettings()},enableExperimentSettings:function(){this.$experimentTogglesWrapper.removeClass("disabled"),this.$experimentSwitches.prop("disabled",!1)},disableExperimentSettings:function(){this.$experimentTogglesWrapper.addClass("disabled"),this.$experimentSwitches.prop("checked",!1).prop("disabled",!0)}});t.exports=s},1638:function(t,e,i){"use strict";var n=i(214),s=i(1639),o=n.extend({name:"PrivacySettings",initialize:function(t){this.gdprSettingsView=new s(t)},render:function(){return this.gdprSettingsView.render(),this}});t.exports=o},1639:function(t,e,i){"use strict";var n=i(3),s=i(226),o=i(130),a=i(213),r=i(8),c=s.extend({renderWithTemplate:n.noop,events:{"change #user_gdpr_consent_core":"_onConsentChange","click #gdpr_request_download":"_onClickRequestDownload","click .cancel-transaction":"_onClickCancelDownload"},_showConfirmation:function(t){var e=this,i=o("Are you sure you want to revoke cookie consent? You will be logged out and won't have access to Tumblr until you consent again.");a.confirm(i,function(){e.undelegateEvents(),t.prop({disabled:!0,checked:!1}).trigger("change")},function(){t.prop("checked",!0)},o("Revoke consent"),o("Nevermind"))},_onConsentChange:function(t){var e=t.target;e.checked||(t.stopPropagation(),t.preventDefault(),this._showConfirmation(r(e)))},_onClickRequestDownload:function(t){var e=r(t.currentTarget);e.addClass("loading"),e.attr("disabled",!0),this._request("/svc/privacy/download","POST",e).done(function(t,e,i){var n=void 0;n=o(202===i.status?"Download request scheduled successfully":"Sorry, we seem to be having technical trouble.  Please try again later."),a.alert(n,function(){202===i.status&&location.reload()})})},_onClickCancelDownload:function(t){var e=this;a.confirm(o("Are you sure you want to cancel/delete this download request?"),function(){var i=r(t.currentTarget);i.addClass("loading"),i.attr("disabled",!0);var n=i.data("url");e._request(n,"DELETE",i).done(function(t,e,i){var n=void 0;n=o(204===i.status?"Download request removed successfully":"Sorry, we seem to be having technical trouble.  Please try again later."),a.alert(n,function(){204===i.status&&location.reload()})})})},_request:function(t,e,i){return r.ajax({url:t,type:e,withFormKey:!0,headers:{Accept:"application/json; charset=utf-8"}}).done(function(){i.removeClass("loading"),i.removeAttr("disabled")}).fail(function(t){i.removeClass("loading"),i.removeAttr("disabled");var e=o("Sorry, we seem to be having technical trouble.  Please try again later.");t.responseJSON&&t.responseJSON.errors&&t.responseJSON.errors[0]&&t.responseJSON.errors[0].detail&&(e=t.responseJSON.errors[0].detail),a.alert(e)})}});t.exports=c},1640:function(t,e,i){"use strict";var n=i(237);n({sprintf:i(6).sprintf,"Tumblr.SettingsAccordionToggle":i(1630),"Tumblr.SettingsAccordionBase":i(1631),"Tumblr.SettingsAccordion":i(1641)})},1641:function(t,e,i){"use strict";var n=i(3),s=i(8),o=i(1631),a=o.extend({defaults:{hide_trigger:!0},events:{"click .accordion_trigger":"on_trigger_click","click .accordion_cancel":"on_cancel_click","click .accordion_save":"on_save_click"},__focus_document:function(t){this.contains(s(t.target))||this.cancel()},initialize:function(t){o.prototype.initialize.call(this,t),this.hide_trigger=this.options.hide_trigger,this.default_value=null,this.$body=s("body"),this.$text_fields=this.$(".accordion_content .text_field:not(.placeholder)"),this.$save_btn=this.$(".accordion_content .accordion_save"),this.$group=this.$el.closest(".settings_group"),a.register(this)},contains:function(t){return!!this.$el.has(t).length},show:function(t){n.each(this.$text_fields,s.proxy(function(t){s(t).data("value",s(t).val())},this)),this.$el.addClass("accordion_focus"),this.$body.addClass("accordion_open"),this.$group.length&&this.$group.addClass("focus"),s(window).on("keydown.accordion",s.proxy(this.on_keydown,this)),t||this.$doc.on("focus.accordion",".left_column a[href], .left_column button, .left_column select, .left_column input, .left_column textarea",n.bind(this.__focus_document,this)),o.prototype.show.call(this,t)},hide:function(t){this.$doc.off(".accordion"),this.$el.removeClass("accordion_focus"),this.$trigger.removeClass("hide"),this.$body.removeClass("accordion_open"),this.$group.length&&this.$group.removeClass("focus"),s(window).off(".accordion"),this.toggle_button_loader(!1),n.each(this.$text_fields,s.proxy(function(e){var i=s(e),n=i.data("value");"undefined"!=typeof n&&(!t&&i.attr("data-persists")||s(e).val(n)),s(e).removeData("value")},this)),o.prototype.hide.call(this)},cancel:function(){this.hide(!0)},toggle_button_loader:function(t){this.$save_btn.length&&this.$save_btn.toggleClass("loading",t)},on_trigger_click:function(t){t.preventDefault(),this.$trigger.toggleClass("hide",this.hide_trigger),this.show()},on_cancel_click:function(){this.cancel()},on_save_click:function(){this.toggle_button_loader(!0)},on_keydown:function(t){switch(t.which){case 27:this.cancel()}}});a.instances=[],a.register=function(t){this.instances.push(t)},a.hide_all=function(){for(var t=0,e=this.instances.length;t<e;t++)this.instances[t].hide()},a.find_by_selector=function(t){for(var e=0,i=this.instances.length;e<i;e++)if(s(t).is(this.instances[e].$el))return this.instances[e];return null},t.exports=a},1642:function(t,e){}});